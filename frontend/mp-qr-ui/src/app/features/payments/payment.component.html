<div class="min-h-screen bg-gray-100 flex items-center justify-center p-6">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6">
    <!-- Título -->
    <div class="text-center">
      <h1 class="text-2xl font-bold text-gray-800">Pago QR</h1>
      <p class="text-sm text-gray-500">Simulación tipo MercadoPago</p>
    </div>

    <!-- Input monto -->
    <div class="space-y-2">
      <label class="text-sm font-medium text-gray-700">Monto</label>
      <input
        type="number"
        class="w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Ingrese monto"
        [value]="store.amount()"
        (input)="updateAmount($event)"
      />
    </div>

    <!-- Botón crear -->
    <button
      class="w-full bg-blue-600 text-white py-2 rounded-xl font-medium hover:bg-blue-700 transition disabled:opacity-50"
      (click)="createPayment()"
      [disabled]="store.loading() || store.amount() <= 0"
    >
      Crear Pago
    </button>

    <!-- Loading -->
    <div *ngIf="store.loading()" class="flex justify-center">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    </div>

    <!-- Información del pago -->
    <div *ngIf="store.externalReference()" class="space-y-4 text-center">
      <!-- QR -->
      <div *ngIf="store.qrCode()">
        <img
          [src]="'https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=' + store.qrCode()"
          class="mx-auto rounded-xl shadow-md"
        />
      </div>

      <!-- External Reference -->
      <div class="text-xs text-gray-400 break-all">Ref: {{ store.externalReference() }}</div>

      <!-- Estado -->
      <div>
        <span
          class="px-4 py-1 text-sm font-semibold rounded-full"
          [ngClass]="{
            'bg-yellow-100 text-yellow-700': store.status() === 'pending',
            'bg-green-100 text-green-700': store.status() === 'approved',
            'bg-red-100 text-red-700': store.status() === 'rejected',
            'bg-gray-200 text-gray-700': store.status() === 'cancelled',
          }"
        >
          {{ store.status() | uppercase }}
        </span>
      </div>

      <!-- Botón cancelar -->
      <button
        *ngIf="store.status() === 'pending'"
        class="w-full bg-red-600 text-white py-2 rounded-xl font-medium hover:bg-red-700 transition"
        (click)="cancelPayment()"
      >
        Cancelar Pago
      </button>
    </div>
  </div>
</div>
